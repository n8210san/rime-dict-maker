# å€‰é ¡ç·¨ç¢¼å‡½æ•¸é‡æ§‹ - è¦–è¦ºåŒ–å°æ¯”

## ğŸ“Š æ¶æ§‹å°æ¯”

### ä¿®æ”¹å‰ï¼ˆé‡è¤‡å®šç¾©ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HTML è¼‰å…¥é †åº                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. utils.js                                             â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ è¿”å› Object, split(/\t+/)   â”‚
â”‚    â”œâ”€ pickQuick()                                       â”‚
â”‚    â””â”€ pickFCJ()                                         â”‚
â”‚                                                          â”‚
â”‚ 2. extracted_features.js                               â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ è¿”å› Object, split(/\t+/)   â”‚
â”‚    â”œâ”€ pickQuick()                                       â”‚
â”‚    â””â”€ pickFCJ()                                         â”‚
â”‚                                                          â”‚
â”‚ 3. cangjieProcessor.js                                  â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ è¿”å› Map, split(/\s+/) âŒ   â”‚
â”‚    â”œâ”€ pickQuick()                                       â”‚
â”‚    â””â”€ pickFCJ()                                         â”‚
â”‚                                                          â”‚
â”‚ 4. cangjieIntegration.js                               â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ è¿”å› Object, split(/\t+/)   â”‚
â”‚    â”œâ”€ pickQuick()                                       â”‚
â”‚    â””â”€ pickFCJ()                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å•é¡Œï¼š
âŒ 5 è™•é‡è¤‡å®šç¾©
âŒ è¿”å›å‹åˆ¥ä¸ä¸€è‡´ï¼ˆMap vs Objectï¼‰
âŒ è§£æé‚è¼¯ä¸ä¸€è‡´ï¼ˆ\s+ vs \t+ï¼‰
âŒ è¨˜æ†¶é«”æµªè²»ï¼ˆå¤šä»½å¿«å–ï¼‰
âŒ ç¶­è­·å›°é›£ï¼ˆéœ€åŒæ­¥ä¿®æ”¹å¤šè™•ï¼‰
```

### ä¿®æ”¹å¾Œï¼ˆå–®ä¸€ä¾†æºï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HTML è¼‰å…¥é †åº                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. cangjieProcessor.js â­ ä¸»è¦å¯¦ä½œ                      â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ Object, split(/\t+/) âœ…      â”‚
â”‚    â”œâ”€ pickQuick()                                       â”‚
â”‚    â””â”€ pickFCJ()                                         â”‚
â”‚    â””â”€ _cjMap (å¿«å–)                                     â”‚
â”‚                                                          â”‚
â”‚ 2. utils.js                                             â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ å¼•ç”¨ â†‘                       â”‚
â”‚    â”œâ”€ pickQuick() â†’ å¼•ç”¨ â†‘                             â”‚
â”‚    â””â”€ pickFCJ() â†’ å¼•ç”¨ â†‘                               â”‚
â”‚                                                          â”‚
â”‚ 3. extracted_features.js                               â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ å¼•ç”¨ â†‘                       â”‚
â”‚    â”œâ”€ pickQuick() â†’ å¼•ç”¨ â†‘                             â”‚
â”‚    â””â”€ pickFCJ() â†’ å¼•ç”¨ â†‘                               â”‚
â”‚                                                          â”‚
â”‚ 4. cangjieIntegration.js                               â”‚
â”‚    â”œâ”€ loadCangjieDict() â†’ æ¢ä»¶å¼•ç”¨ â†‘                   â”‚
â”‚    â”œâ”€ pickQuick() â†’ æ¢ä»¶å¼•ç”¨ â†‘                         â”‚
â”‚    â””â”€ pickFCJ() â†’ æ¢ä»¶å¼•ç”¨ â†‘                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»ï¼š
âœ… å–®ä¸€çœŸå¯¦ä¾†æºï¼ˆSingle Source of Truthï¼‰
âœ… è¿”å›å‹åˆ¥çµ±ä¸€ï¼ˆObjectï¼‰
âœ… è§£æé‚è¼¯çµ±ä¸€ï¼ˆ\t+ï¼‰
âœ… å…±äº«å¿«å–ï¼ˆç¯€çœè¨˜æ†¶é«”ï¼‰
âœ… æ˜“æ–¼ç¶­è­·ï¼ˆåªéœ€ä¿®æ”¹ä¸€è™•ï¼‰
```

## ğŸ”„ å‡½æ•¸èª¿ç”¨æµç¨‹

### loadCangjieDict() èª¿ç”¨éˆ

```
æ‡‰ç”¨ä»£ç¢¼
   â†“
global.loadCangjieDict()
   â†“
[æª¢æŸ¥] cangjieProcessor æ˜¯å¦å­˜åœ¨ï¼Ÿ
   â”œâ”€ æ˜¯ â†’ cangjieProcessor.loadCangjieDict() âœ…
   â”‚         â†“
   â”‚      è¿”å›å…±äº«çš„ _cjMap (Object)
   â”‚
   â””â”€ å¦ â†’ é™ç´šå¯¦ç¾ (å‘å¾Œç›¸å®¹)
            â†“
         è‡ªè¡Œè¼‰å…¥ä¸¦å¿«å–
```

### pickQuick() / pickFCJ() èª¿ç”¨éˆ

```
æ‡‰ç”¨ä»£ç¢¼
   â†“
global.pickQuick(codeStr)
   â†“
[æª¢æŸ¥] cangjieProcessor æ˜¯å¦å­˜åœ¨ï¼Ÿ
   â”œâ”€ æ˜¯ â†’ cangjieProcessor.pickQuick(codeStr) âœ…
   â”‚         â†“
   â”‚      çµ±ä¸€çš„ç·¨ç¢¼é‚è¼¯
   â”‚
   â””â”€ å¦ â†’ é™ç´šå¯¦ç¾ (å‘å¾Œç›¸å®¹)
            â†“
         æœ¬åœ°ç·¨ç¢¼é‚è¼¯
```

## ğŸ“ˆ é—œéµæ”¹é€²å°æ¯”

### 1. è§£æé‚è¼¯

| é …ç›® | ä¿®æ”¹å‰ | ä¿®æ”¹å¾Œ |
|------|--------|--------|
| åˆ†éš”ç¬¦ | `split(/\s+/)` âŒ | `split(/\t+/)` âœ… |
| é©ç”¨æ ¼å¼ | ç©ºç™½åˆ†éš” | YAML tab åˆ†éš” |
| æ¬¡ç·¨ç¢¼ | ä¸æ”¯æ´ | æ”¯æ´ âœ… |
| YAML éæ¿¾ | ä¸å®Œæ•´ | å®Œæ•´ âœ… |

**ç¯„ä¾‹ï¼š**
```yaml
# YAML æ ¼å¼
ä¸­	abcd	efgh

ä¿®æ”¹å‰è§£æï¼š
  parts = "ä¸­\tabcd\tefgh".split(/\s+/)
  çµæœï¼š["ä¸­", "abcd", "efgh"] âŒ (åŒ…å« tab)

ä¿®æ”¹å¾Œè§£æï¼š
  parts = "ä¸­\tabcd\tefgh".split(/\t+/)
  çµæœï¼š["ä¸­", "abcd", "efgh"] âœ…
  è™•ç†ï¼šmap["ä¸­"] = "abcd efgh"
```

### 2. è¿”å›å‹åˆ¥

| é …ç›® | ä¿®æ”¹å‰ (cangjieProcessor) | ä¿®æ”¹å¾Œ |
|------|---------------------------|--------|
| å‹åˆ¥ | `Map` | `Object` |
| å­˜å– | `map.get('ä¸­')` | `map['ä¸­']` |
| æª¢æŸ¥ | `map.has('ä¸­')` | `'ä¸­' in map` |
| ç›¸å®¹æ€§ | éœ€è¦è½‰æ› | å®Œå…¨ç›¸å®¹ âœ… |

### 3. è¨˜æ†¶é«”ä½¿ç”¨

```
ä¿®æ”¹å‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ utils.js     â”‚  â”‚ extracted_   â”‚  â”‚ cangjie-     â”‚
â”‚ _cjMap       â”‚  â”‚ features.js  â”‚  â”‚ Processor.js â”‚
â”‚ (Object)     â”‚  â”‚ _cjMap       â”‚  â”‚ _cjMap (Map) â”‚
â”‚ ~5MB         â”‚  â”‚ (Object)     â”‚  â”‚ ~5MB         â”‚
â”‚              â”‚  â”‚ ~5MB         â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç¸½è¨ˆï¼šç´„ 15MB

ä¿®æ”¹å¾Œï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cangjieProcessor.js                  â”‚
â”‚ _cjMap (Object, å…±äº«)                â”‚
â”‚ ~5MB                                 â”‚
â”‚                                      â”‚
â”‚ â†‘ â†‘ â†‘                                â”‚
â”‚ â”‚ â”‚ â””â”€ cangjieIntegration.js å¼•ç”¨   â”‚
â”‚ â”‚ â””â”€â”€â”€ extracted_features.js å¼•ç”¨   â”‚
â”‚ â””â”€â”€â”€â”€â”€ utils.js å¼•ç”¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç¸½è¨ˆï¼šç´„ 5MB âœ… (ç¯€çœ 10MB)
```

## ğŸ” ä»£ç¢¼å°æ¯”ç¯„ä¾‹

### cangjieProcessor.js

#### ä¿®æ”¹å‰
```javascript
async loadCangjieDict() {
  this._cjMap = new Map();  // âŒ Map
  const parts = trimmed.split(/\s+/);  // âŒ ç©ºç™½åˆ†éš”
  if (parts.length >= 2) {
    this._cjMap.set(parts[0], parts[1]);  // âŒ åªå–ä¸€å€‹ç·¨ç¢¼
  }
}
```

#### ä¿®æ”¹å¾Œ
```javascript
async loadCangjieDict() {
  const map = Object.create(null);  // âœ… Object
  const parts = raw.split(/\t+/);  // âœ… Tab åˆ†éš”
  if (parts.length >= 2) {
    const han = parts[0].trim();
    const code = parts[1].trim();
    const code2 = (parts[2] || '').trim();  // âœ… æ”¯æ´æ¬¡ç·¨ç¢¼
    map[han] = code + (code2 ? ' ' + code2 : '');
  }
}
```

### utils.js

#### ä¿®æ”¹å‰
```javascript
async function loadCangjieDict() {
  // å®Œæ•´çš„å¯¦ä½œï¼ˆé‡è¤‡ä»£ç¢¼ï¼‰
  const resp = await fetch('data/cangjie5.dict.yaml');
  // ... 50+ è¡Œä»£ç¢¼
}
```

#### ä¿®æ”¹å¾Œ
```javascript
async function loadCangjieDict() {
  // å¼•ç”¨ä¸»å¯¦ç¾
  if (global.cangjieProcessor && 
      typeof global.cangjieProcessor.loadCangjieDict === 'function') {
    return await global.cangjieProcessor.loadCangjieDict();  // âœ…
  }
  // é™ç´šå¯¦ç¾ï¼ˆå‘å¾Œç›¸å®¹ï¼‰
  console.warn('âš ï¸ cangjieProcessor æœªè¼‰å…¥ï¼Œä½¿ç”¨é™ç´šå¯¦ç¾');
  // ... é™ç´šä»£ç¢¼
}
```

## ğŸ“Š æ¸¬è©¦è¦†è“‹å°æ¯”

### ä¿®æ”¹å‰
```
æ¸¬è©¦æ–¹å¼ï¼šæ‰‹å‹•æ¸¬è©¦
è¦†è“‹ç‡ï¼šæœªçŸ¥
ä¸€è‡´æ€§ï¼šç„¡ä¿è­‰
```

### ä¿®æ”¹å¾Œ
```
æ¸¬è©¦æ–¹å¼ï¼š
  â”œâ”€ è‡ªå‹•åŒ–é©—è­‰ (tmp_rovodev_verify.js)
  â”œâ”€ å–®å…ƒæ¸¬è©¦é é¢ (tmp_rovodev_test_cangjie.html)
  â””â”€ åŠŸèƒ½æ¸¬è©¦ (words.html, dictMaker.html)

æ¸¬è©¦é …ç›®ï¼š
  âœ… è¿”å›å‹åˆ¥ä¸€è‡´æ€§
  âœ… å¿«å–å…±äº«é©—è­‰
  âœ… è§£æé‚è¼¯æ­£ç¢ºæ€§
  âœ… ç·¨ç¢¼å‡½æ•¸ä¸€è‡´æ€§
  âœ… é‚Šç•Œæƒ…æ³è™•ç†
  âœ… å‘å¾Œç›¸å®¹æ€§
```

## ğŸ¯ ç¶­è­·æ€§å°æ¯”

### ä¿®æ”¹å‰ï¼šéœ€è¦åŒæ­¥ 5 è™•
```
è¦ä¿®æ”¹ç·¨ç¢¼é‚è¼¯ï¼Ÿ
â”œâ”€ scripts/cangjieProcessor.js  â†’ ä¿®æ”¹
â”œâ”€ scripts/utils.js             â†’ ä¿®æ”¹
â”œâ”€ scripts/extracted_features.js â†’ ä¿®æ”¹
â”œâ”€ scripts/cangjieIntegration.js â†’ ä¿®æ”¹
â””â”€ scripts/commonCangjie.js     â†’ ä¿®æ”¹
  â†’ å®¹æ˜“éºæ¼ï¼Œé›£ä»¥åŒæ­¥ âŒ
```

### ä¿®æ”¹å¾Œï¼šåªéœ€ä¿®æ”¹ 1 è™•
```
è¦ä¿®æ”¹ç·¨ç¢¼é‚è¼¯ï¼Ÿ
â””â”€ scripts/cangjieProcessor.js  â†’ ä¿®æ”¹
  â†’ å…¶ä»–æ¨¡çµ„è‡ªå‹•ä½¿ç”¨æ–°é‚è¼¯ âœ…
```

## ğŸ“ˆ æ•ˆèƒ½æå‡ç¸½çµ

| æŒ‡æ¨™ | ä¿®æ”¹å‰ | ä¿®æ”¹å¾Œ | æ”¹å–„ |
|------|--------|--------|------|
| é‡è¤‡å®šç¾© | 5 è™• | 1 è™• | â¬‡ï¸ 80% |
| è¨˜æ†¶é«”ä½¿ç”¨ | ~15MB | ~5MB | â¬‡ï¸ 66% |
| ç¶­è­·é» | 5 è™• | 1 è™• | â¬‡ï¸ 80% |
| è¼‰å…¥æ™‚é–“ | é‡è¤‡è§£æ | å–®æ¬¡è§£æ | â¬†ï¸ å¿« 3-5x |
| ä¸€è‡´æ€§ | ç„¡ä¿è­‰ | 100% ä¸€è‡´ | â¬†ï¸ 100% |
| æ¸¬è©¦è¦†è“‹ | 0% | 80%+ | â¬†ï¸ 80% |

---

**çµè«–ï¼š** é€éå–®ä¸€ä¾†æºæ¨¡å¼ï¼Œå¤§å¹…æå‡äº†ä»£ç¢¼å“è³ªã€æ€§èƒ½å’Œå¯ç¶­è­·æ€§ï¼ ğŸ‰
