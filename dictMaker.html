<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>字典整理器</title>
  <link rel="stylesheet" href="words.css" />
</head>
<body>
    <h2>字典整理器</h2>
    <small>
      <hr>排序字典檔 => 快倉 => dict_max2_fcj.txt
      <hr><a href="words.html" target="word">斷詞整理器</a><hr>
    </small>

    <div class="controls">
        <button id="openFileBtn">開啟檔案</button>
        <input type="file" id="openFileInput" accept=".txt,.md,.csv,.json,.log,.xml,.html,.htm,text/*" multiple style="display:none" />
        <select id="encodingSelect" title="檔案編碼" style="height: 48px; background-color: #eef;">
          <option value="utf-8" selected>UTF-8</option>
          <option value="big5">Big5</option>
          <option value="gbk">GBK</option>
          <option value="gb18030">GB18030</option>
          <option value="shift_jis">Shift_JIS</option>
          <option value="utf-16le">UTF-16LE</option>
          <option value="utf-16be">UTF-16BE</option>
        </select>
        排序字典檔計數範圍：
        <input type="text" id="rangeInput" placeholder=">300 或 300-20 或 50-250" value=">2999" style="height: 40px; width: 180px; padding: 0 8px;" />
        <button id="sortDictBtn">排序字典檔</button>
        <button id="dedupeWithCommentsBtn">註解去重→Rime</button>
        <button id="normalizeBtn">補完整字典</button>
        <button id="quickBtn">速成</button>
        <button id="fcjBtn">快倉</button>
        <label title="在輸出時加上原始計數" style="margin-left:8px; font-size:13px;"><input type="checkbox" id="countOpt"> 計數</label>
        <label title="選擇分隔符" style="margin-left:8px; font-size:13px;">分隔符:
          <select id="separatorOpt" style="margin-left:4px;">
            <option value="\t">tab</option>
            <option value=" ">空格</option>
          </select>
        </label>
        <span id="dictMakerCharOptions" style="margin-left:8px;">輸出詞組字數：</span>
        <br style="clear:both;">
        <span class="fcj-options" style="margin-left:8px; font-size:13px; display:inline-flex; gap:10px; align-items:center;">
          <label title="單字次數 > 1000 且為 3 碼時，另加一列左右碼"><input type="checkbox" id="fcjOpt_freq1000_code3_to_code2" checked> 常用單字另加左右碼</label>
          <label title="常用單字加碼配套：2碼優先,3碼備用">(2碼優先,3碼備用)</label>
          <label title="單字取碼：前2碼+後1碼（不超過原碼長度）">單字取碼 2+1</label>
          <label title="多字詞：各字取左右碼後串接">詞: 左右碼拼接</label>
        </span>
        <br>
        <button id="nextStepBtn">←輸出轉輸入</button>
        <button id="swapBtn">←互換→</button>
        <button id="undoBtn">復原</button>
        <button id="downloadBtn">下載結果</button>
    </div>

    <div class="container">
        <div class="text-box">
            <h3>輸入</h3>
            <textarea id="inputTextarea" placeholder="請在此輸入字典..."></textarea>
            <div id="inputCount" style="margin-top:4px; font-size:12px; color:#666;"></div>
        </div>
        <div class="text-box">
            <h3>輸出</h3>
            <textarea id="outputTextarea" ></textarea>
            <div id="outputCount" style="margin-top:4px; font-size:12px; color:#666;"></div>
            <div id="outputMeta" style="margin-top:4px; font-size:12px; color:#555;"></div>
            <div>
              <span id="excuted_result"></span>
            </div>
        </div>
    </div>

<script src="scripts/jquery-3.7.1.slim.min.js"> </script>
<script src="scripts/configIntegration.js"></script>
<script src="scripts/cangjieProcessor.js"></script>
<script src="scripts/cangjieIntegration.js"></script>
<script src="scripts/charFilterIntegration.js"></script>
<script src="scripts/utils.js"></script>
<script src="scripts/extracted_features.js"></script>
<script src="scripts/rangeFilter.js"></script>
<script src="html-lib/components/CharLengthOptions/CharLengthOptions.js"></script>
<script src="scripts/dictMaker.js"></script>
<script src="scripts/legacy_compatibility.js"></script>

<footer style="margin:24px 0 12px; padding-top:12px; border-top:1px solid #ddd; font-size:13px; color:#444; display:flex; gap:12px; align-items:flex-start;">
  <div id="flowQuick" style="flex:1 1 0; padding:8px; border:1px solid #ccc; border-radius:6px;">
    <strong>速成流程</strong>
    <ol style="margin:6px 0 0 18px;">
      <li>取行最前連續中文字為詞；若詞中任一字查無主碼 → 整行忽略</li>
      <li>對詞中每字取碼：主碼長度=1 → 1碼；主碼長度&gt;1 → 左1+右1</li>
      <li>逐字輸出「字 新碼」，同一輪執行中去重複</li>
    </ol>
  </div>
  <div id="flowFCJ" style="flex:1 1 0; padding:8px; border:1px solid #ccc; border-radius:6px;">
    <strong>快倉流程</strong>
    <ol style="margin:6px 0 0 18px;">
      <li>取行最前連續中文字為詞；若詞中任一字查無主碼 → 整行忽略</li>
      <li>若為單字：三碼規則（1/2/3碼；主碼≥3時用左2+右1）</li>
      <li>若勾選「常用單字另加左右碼」且次數&gt;1000且三碼=3碼：立即輸出左右碼；三碼延後至最後依序追加</li>
      <li>若為多字詞：各字取左右碼（1碼或左1+右1）後串接為整體詞碼</li>
      <li>去重複：一般性重複保留先出現；延後三碼按加入順序追加</li>
    </ol>
  </div>
</footer>
</body>
</html>